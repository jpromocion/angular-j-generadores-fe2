<h2 class="tracking-in-expand">{{ 'generadores.jpromocion.menu.perfiles' | translate }}</h2>

<div class="panelFluidoSegundoNivel bounce-in-bottom">
  <div class="grid-layout-param">

    <div class="caja c0">
      <h3>{{ 'generadores.jpromocion.generarcomunes.frame.filtros' | translate }}</h3>
    </div>
  </div>

  <div class="grid-layout-param">
    <div class="caja c1">
      <label>{{ 'generadores.jpromocion.perfil.entrada.tipoperfil.label' | translate }}: </label>
      <mat-button-toggle-group name="tipoperfil" aria-label="Tipo perfil" [(ngModel)]="tipoPerfil"  style="margin-left: 10px;">
        <mat-button-toggle value="p">{{ 'generadores.jpromocion.perfil.entrada.tipoperfil.valorp' | translate }}</mat-button-toggle>
        <mat-button-toggle value="e">{{ 'generadores.jpromocion.perfil.entrada.tipoperfil.valore' | translate }}</mat-button-toggle>
      </mat-button-toggle-group>
    </div>
    <div class="caja c2">
      <label style="margin-left: 5px;">{{ 'generadores.jpromocion.perfil.entrada.sexo.label' | translate }}: </label>
      <mat-button-toggle-group name="genero" aria-label="Genero persona" [(ngModel)]="sexoSeleccionado"  style="margin-left: 10px;">
        <mat-button-toggle value="a">{{ 'generadores.jpromocion.perfil.entrada.sexo.valora' | translate }}</mat-button-toggle>
        <mat-button-toggle value="h">{{ 'generadores.jpromocion.perfil.entrada.sexo.valorh' | translate }}</mat-button-toggle>
        <mat-button-toggle value="m">{{ 'generadores.jpromocion.perfil.entrada.sexo.valorm' | translate }}</mat-button-toggle>
      </mat-button-toggle-group>
    </div>
    <div class="caja c3">
      <label style="margin-left: 5px;">{{ 'generadores.jpromocion.generarcomunes.entrada.tipoletra.label' | translate }}: </label>
      <mat-button-toggle-group name="tipoletra" [(ngModel)]="tipoLetra"  style="margin-left: 10px;">
        <mat-button-toggle value="s">{{ 'generadores.jpromocion.generarcomunes.entrada.tipoletra.valors' | translate }}</mat-button-toggle>
        <mat-button-toggle value="M">{{ 'generadores.jpromocion.generarcomunes.entrada.tipoletra.valormay' | translate }}</mat-button-toggle>
        <mat-button-toggle value="m">{{ 'generadores.jpromocion.generarcomunes.entrada.tipoletra.valormin' | translate }}</mat-button-toggle>
        <mat-button-toggle value="c">{{ 'generadores.jpromocion.generarcomunes.entrada.tipoletra.valorc' | translate }}</mat-button-toggle>
      </mat-button-toggle-group>
    </div>
  </div>

  <div class="grid-layout-param">
    <div class="caja c4">
      <mat-form-field style="width: 150px !important;">
        <mat-label>{{ 'generadores.jpromocion.generarcomunes.numgeneraciones.label' | translate }}</mat-label>
        <input matInput id="numGenera" type="number"  min="2" max="1000" [(ngModel)]="numGenerar">
      </mat-form-field>

      <button type="button"  mat-fab class="botonRotatorio" style=" margin-left: 10px;"
        attr.aria-label="{{ 'generadores.jpromocion.perfil.boton.generarperfil.label' | translate }}"
        (click)="onClickBotonGenerarPerfil()"
        matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.generar.tooltip' | translate }}" matTooltipPosition="below">
        <mat-icon>refresh</mat-icon>
      </button>
    </div>



  </div>

  <!--Grid par ael caso de la persona unica-->
  <div class="grid-layout" [@entradaLateralAnimation] *ngIf="personaGenerada">

    <div class="caja cpDir" style="margin-top: 10px;">
      <div class="divBox">
        <h3>{{ 'generadores.jpromocion.perfil.frame.personagenerada' | translate }}</h3>
      </div>
    </div>
  </div>

  <div class="grid-layout" [@entradaLateralAnimation] *ngIf="personaGenerada">
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.nif.label' | translate }}: </label>
      <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.nif)" style="margin-left: 10px; "
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="nif">{{personaGenerada.nif}}</span>
      </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.nie.label' | translate }}: </label>
      <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.nie)" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="nie">{{personaGenerada.nie}}</span>
      </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.nss.label' | translate }}: </label>
      <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.nss)" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="nss">{{personaGenerada.nss}}</span>
      </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.pasaporte.label' | translate }}: </label>
      <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.pasaporte)" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="pasaporte">{{personaGenerada.pasaporte}}</span>
      </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.sexo.label' | translate }}: </label>
      <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.genero))" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="genero">{{ personaGenerada.genero | caseTransformer: tipoLetra }}</span>
      </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.fechanacimiento.label' | translate }}: </label>
        <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.fechaNacimiento)" style="margin-left: 10px;"
        matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
          <span class="fecha">{{personaGenerada.fechaNacimiento}}</span>
        </button>
        <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.edad)" style="margin-left: 10px;"
        matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
          <span class="edad">{{personaGenerada.edad}}</span>
        </button>
    </div>

    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.nombre.label' | translate }}: </label>
      <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.nombre))" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="nombre">{{personaGenerada.nombre | caseTransformer: tipoLetra}}</span>
      </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.apellido1.label' | translate }}: </label>
      <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.apellido1))" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="nombre">{{personaGenerada.apellido1 | caseTransformer: tipoLetra}}</span>
      </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.apellido2.label' | translate }}: </label>
      <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.apellido2))" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="nombre">{{personaGenerada.apellido2 | caseTransformer: tipoLetra}}</span>
      </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.nombrecompleto.label' | translate }}</label>
      <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.nombreCompleto))" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="nombre">{{personaGenerada.nombreCompleto | caseTransformer: tipoLetra}}</span>
      </button>
    </div>


    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.telefonomovil.label' | translate }}:</label>
      <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.telefonoMovil)" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="telefono">{{personaGenerada.telefonoMovil}}</span>
      </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.telefonofijo.label' | translate }}:</label>
      <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.telefonoFijo)" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="telefono">{{personaGenerada.telefonoFijo}}</span>
      </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.login.label' | translate }}:</label>
      <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.login))" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="login">{{personaGenerada.login | caseTransformer: tipoLetra}}</span>
      </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.email.label' | translate }}:</label>
      <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.email))" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="email">{{personaGenerada.email | caseTransformer: tipoLetra}}</span>
      </button>
    </div>


    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.password.label' | translate }}:</label>
      <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.password)" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="password">{{personaGenerada.password}}</span>
      </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.ccaa.label' | translate }}:</label>
        <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.direccion.ineCcaa)" style="margin-left: 10px;"
        matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
          <span class="ccaaIne">{{personaGenerada.direccion.ineCcaa}}</span>
        </button>
        <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.direccion.ccaa))" style="margin-left: 10px;"
        matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
          <span class="ccaa">{{personaGenerada.direccion.ccaa | caseTransformer: tipoLetra}}</span>
        </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.provincia.label' | translate }}:</label>
        <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.direccion.ineProvincia)" style="margin-left: 10px;"
        matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
          <span class="provinciaIne">{{personaGenerada.direccion.ineProvincia}}</span>
        </button>
        <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.direccion.provincia))" style="margin-left: 10px;"
        matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
          <span class="provincia">{{personaGenerada.direccion.provincia | caseTransformer: tipoLetra}}</span>
        </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.municipio.label' | translate }}:</label>
        <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.direccion.ineMunicipio)" style="margin-left: 10px;"
        matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
          <span class="municipioIne">{{personaGenerada.direccion.ineMunicipio}}</span>
        </button>
        <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.direccion.municipio))" style="margin-left: 10px;"
        matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
          <span class="municipio">{{personaGenerada.direccion.municipio| caseTransformer: tipoLetra}}</span>
        </button>
    </div>

    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.cp.label' | translate }}:</label>
      <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.direccion.codPostal)" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="codigoPostal">{{personaGenerada.direccion.codPostal}}</span>
      </button>
    </div>
  </div>

  <div class="grid-layout" [@entradaLateralAnimation] *ngIf="personaGenerada">
    <div class="caja cpDir" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.direccion.label' | translate }}:</label>
      <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.direccion.direccionAMedio))" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="direccion">{{personaGenerada.direccion.direccionAMedio | caseTransformer: tipoLetra}}</span>
      </button>
    </div>
  </div>

  <div class="grid-layout" [@entradaLateralAnimation] *ngIf="personaGenerada">
    <div class="caja cpDir" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.direccioncompleta.label' | translate }}:</label>
      <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.direccion.direccionCompleta))" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="direccion">{{personaGenerada.direccion.direccionCompleta | caseTransformer: tipoLetra}}</span>
      </button>
    </div>
  </div>

  <div class="grid-layout" [@entradaLateralAnimation] *ngIf="personaGenerada">
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.refcatastral.label' | translate }}:</label>
      <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.direccion.referenciaCatastral))" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="iban">{{personaGenerada.direccion.referenciaCatastral | caseTransformer: tipoLetra}}</span>
      </button>
    </div>

    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.iban.label' | translate }}:</label>
      <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.iban)" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="iban">{{personaGenerada.iban}}</span>
      </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.bic.label' | translate }}:</label>
      <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.bic)" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="bic">{{personaGenerada.bic}}</span>
      </button>
    </div>

    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.tarjeta.label' | translate }}:</label>
      <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.tarjetaCredito)" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="tarjetaCredito">{{personaGenerada.tarjetaCredito}}</span>
      </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.tipotarjeta.label' | translate }}:</label>
      <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.tipoTarjeta))" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="tipoTarjeta">{{personaGenerada.tipoTarjeta | caseTransformer: tipoLetra}}</span>
      </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.expiracion.label' | translate }}:</label>
      <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.expiracionCredito)" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="expiracionCredito">{{personaGenerada.expiracionCredito}}</span>
      </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.persona.cvc.label' | translate }}:</label>
      <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.cvc)" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="cvc">{{personaGenerada.cvc}}</span>
      </button>
    </div>

  </div>

  <!--Grid par ael caso de la empresa unica-->
  <div class="grid-layout" [@entradaLateralAnimation] *ngIf="empresaGenerada">

    <div class="caja cpDir" style="margin-top: 10px;">
      <div class="divBox">
        <h3>{{ 'generadores.jpromocion.perfil.frame.empresagenerada' | translate }}</h3>
      </div>
    </div>
  </div>
  <div class="grid-layout" [@entradaLateralAnimation] *ngIf="empresaGenerada">
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.empresa.cif.label' | translate }}: </label>
      <button mat-flat-button  type="button" (click)="onSelectDato(empresaGenerada.cif)" style="margin-left: 10px; "
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="cif">{{empresaGenerada.cif}}</span>
      </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.empresa.razonsocial.label' | translate }}: </label>
      <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(empresaGenerada.nombre))" style="margin-left: 10px; "
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="nombre">{{empresaGenerada.nombre | caseTransformer: tipoLetra}}</span>
      </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.empresa.fechaconstitucion.label' | translate }}: </label>
      <button mat-flat-button  type="button" (click)="onSelectDato(empresaGenerada.fechaCreacion)" style="margin-left: 10px; "
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="fecha">{{empresaGenerada.fechaCreacion}}</span>
      </button>
    </div>

    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.empresa.cnae.label' | translate }}: </label>
      <button mat-flat-button  type="button" (click)="onSelectDato(empresaGenerada.cnae)" style="margin-left: 10px; "
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="cnae">{{empresaGenerada.cnae}}</span>
      </button>
    </div>
  </div>

  <div class="grid-layout" [@entradaLateralAnimation] *ngIf="empresaGenerada">
    <div class="caja cpDir" >
      <label>{{ 'generadores.jpromocion.perfil.salida.empresa.actividad.label' | translate }}: </label>
      <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(empresaGenerada.actividad))" style="margin-left: 10px; "
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="actividad">{{empresaGenerada.actividad | caseTransformer: tipoLetra}}</span>
      </button>
    </div>
  </div>

  <div class="grid-layout" [@entradaLateralAnimation] *ngIf="empresaGenerada">
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.empresa.email.label' | translate }}: </label>
      <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(empresaGenerada.email))" style="margin-left: 10px; "
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="email">{{empresaGenerada.email | caseTransformer: tipoLetra}}</span>
      </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.empresa.paginaweb.label' | translate }}: </label>
      <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(empresaGenerada.paginaWeb))" style="margin-left: 10px; "
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="web">{{empresaGenerada.paginaWeb | caseTransformer: tipoLetra}}</span>
      </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.empresa.telefono.label' | translate }}: </label>
      <button mat-flat-button  type="button" (click)="onSelectDato(empresaGenerada.telefono)" style="margin-left: 10px; "
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="telefono">{{empresaGenerada.telefono}}</span>
      </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.empresa.fax.label' | translate }}: </label>
      <button mat-flat-button  type="button" (click)="onSelectDato(empresaGenerada.fax)" style="margin-left: 10px; "
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="telefono">{{empresaGenerada.fax}}</span>
      </button>
    </div>

    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.empresa.ccaa.label' | translate }}:</label>
        <button mat-flat-button  type="button" (click)="onSelectDato(empresaGenerada.direccion.ineCcaa)" style="margin-left: 10px;"
        matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
          <span class="ccaaIne">{{empresaGenerada.direccion.ineCcaa}}</span>
        </button>
        <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(empresaGenerada.direccion.ccaa))" style="margin-left: 10px;"
        matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
          <span class="ccaa">{{empresaGenerada.direccion.ccaa | caseTransformer: tipoLetra}}</span>
        </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.empresa.provincia.label' | translate }}:</label>
        <button mat-flat-button  type="button" (click)="onSelectDato(empresaGenerada.direccion.ineProvincia)" style="margin-left: 10px;"
        matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
          <span class="provinciaIne">{{empresaGenerada.direccion.ineProvincia}}</span>
        </button>
        <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(empresaGenerada.direccion.provincia))" style="margin-left: 10px;"
        matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
          <span class="provincia">{{empresaGenerada.direccion.provincia | caseTransformer: tipoLetra}}</span>
        </button>
    </div>
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.empresa.municipio.label' | translate }}:</label>
        <button mat-flat-button  type="button" (click)="onSelectDato(empresaGenerada.direccion.ineMunicipio)" style="margin-left: 10px;"
        matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
          <span class="municipioIne">{{empresaGenerada.direccion.ineMunicipio}}</span>
        </button>
        <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(empresaGenerada.direccion.municipio))" style="margin-left: 10px;"
        matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
          <span class="municipio">{{empresaGenerada.direccion.municipio | caseTransformer: tipoLetra}}</span>
        </button>
    </div>

    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.empresa.cp.label' | translate }}:</label>
      <button mat-flat-button  type="button" (click)="onSelectDato(empresaGenerada.direccion.codPostal)" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="codigoPostal">{{empresaGenerada.direccion.codPostal}}</span>
      </button>
    </div>
  </div>

  <div class="grid-layout" [@entradaLateralAnimation] *ngIf="empresaGenerada">
    <div class="caja cpDir" >
      <label>{{ 'generadores.jpromocion.perfil.salida.empresa.direccion.label' | translate }}:</label>
      <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(empresaGenerada.direccion.direccionAMedio))" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="direccion">{{empresaGenerada.direccion.direccionAMedio| caseTransformer: tipoLetra}}</span>
      </button>
    </div>
  </div>

  <div class="grid-layout" [@entradaLateralAnimation] *ngIf="empresaGenerada">
    <div class="caja cpDir" >
      <label>{{ 'generadores.jpromocion.perfil.salida.empresa.direccioncompleta.label' | translate }}:</label>
      <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(empresaGenerada.direccion.direccionCompleta))" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="direccion">{{empresaGenerada.direccion.direccionCompleta| caseTransformer: tipoLetra}}</span>
      </button>
    </div>
  </div>

  <div class="grid-layout" [@entradaLateralAnimation] *ngIf="empresaGenerada">
    <div class="caja" >
      <label>{{ 'generadores.jpromocion.perfil.salida.empresa.refcatastral.label' | translate }}:</label>
      <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(empresaGenerada.direccion.referenciaCatastral))" style="margin-left: 10px;"
      matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
        <span class="catastral">{{empresaGenerada.direccion.referenciaCatastral| caseTransformer: tipoLetra}}</span>
      </button>
    </div>


  </div>

  <!-- Personas cuando estamos generando una lista -->
  <!--  Porque utilizar [hidden] en vez de ngIf: hidden oculta los elementos pero en el DOM estan siempre, ngIf los elimina del DOM.
      -Si uitilizamos ngIf -> dejan de funcionar MatSort y MatPaginator
      -Con [hidden] en vez, es un workaround para que funcione MatSort y MatPaginator sin problemas.
    https://stackoverflow.com/questions/56028775/mat-paginator-breaks-when-mat-table-is-inside-of-ngif
    https://stackoverflow.com/questions/64065278/material-pagination-does-not-work-when-inside-ngif/64077319
    Ahora bien con [hidden] las animaciones de entrada y salida no funcionan ([@entradaLateralAnimation]), porque no sale/entra del DOM.
    1) Utilizar [hidden] con animaciones css. Bien... pero tiene un problema, que al entrar a la pagina se ve como desaparecen las tablas vacias...
        class="entradaLateralAnimationCSS" [hidden]="!((listaPersonasGeneradasOriginal.length && listaPersonasGeneradasOriginal.length > 0))"
    2) https://codehandbook.org/mat-paginator-not-working-inside-ngif/
      Utilizar en ts el ChangeDetectorRef cada vez que se genera la tabla de nuevo, para forzar la actualizacion correcta de los elementos.
      Debera re-inicilizarse el paginador y el sort siempre.
    -> utilizamos la segunda
  -->
  <div [@entradaLateralAnimation] *ngIf="listaPersonasGeneradasOriginal.length && listaPersonasGeneradasOriginal.length > 0" >
    <div style="margin-top: 10px;">
      <div class="divBox">
        <div [matBadge]="badgetPersonasGenradas" matBadgeOverlap="false"><h3>{{ 'generadores.jpromocion.perfil.frame.personasgeneradas' | translate }}</h3></div>
      </div>
    </div>

    <div class="table-responsive">
      <table mat-table #sortPersonas="matSort" [dataSource]="listaPersonasGeneradas"
        matSort  (matSortChange)="sortDataPersonas($event)"
        cdkDropList cdkDropListOrientation="horizontal" (cdkDropListDropped)="dropColumnsPersonas($event)">

        <!-- Opcion de parametrizar columna y mostrar por tipo en vez de hacerlo por cada columna
          https://muhimasri.com/blogs/create-an-editable-dynamic-table-using-angular-material/
         -->
        <ng-container [matColumnDef]="col.key" *ngFor="let col of columnsSchemaPersonas">
          <th mat-header-cell *matHeaderCellDef mat-sort-header cdkDrag>
            {{ col.label | translate }}
            <button mat-icon-button (click)="$event.stopPropagation(); openFilterPersonas(col.key); ">
              <mat-icon>search</mat-icon>
            </button>
            <input class="filtroCabeceraTabla" #inputSearchPersonas type="text" hidden id="{{col.key}}-filterPersonas"
              (click)="$event.stopPropagation()"
              (blur)="filterDataPersonas(col.key, inputSearchPersonas.value); closeFilterPersonas(col.key)" />
          </th>
          <td mat-cell *matCellDef="let personaGenerada">
            <!-- Seleccionamos por el type como mostrarlo-->
            <div [ngSwitch]="col.type" >
              <!--button: boton normal para mostrar un dato (viene parametrizado por propiedades: si aplica una clase de formato distinta,
                si aplica cambio mayus/minus e incluso si no lleva solo un valor a mostrar sino dos valores)
              -->
              <div *ngSwitchCase="'button'">
                <button mat-flat-button [ngClass]="col.clase" type="button" (click)="onSelectDato(transformaTexto(personaGenerada[col.columna], col.caseSensitive))"
                  matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
                  <span *ngIf="col.caseSensitive">{{personaGenerada[col.columna] | caseTransformer: tipoLetra }}</span>
                  <span *ngIf="!col.caseSensitive">{{personaGenerada[col.columna]}}</span>
                </button>
                <button *ngIf="personaGenerada[col.columna2] && personaGenerada[col.columna2] != ''"
                  mat-flat-button [ngClass]="col.clase" type="button" (click)="onSelectDato(transformaTexto(personaGenerada[col.columna2], col.caseSensitive))"
                  matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
                  <span *ngIf="col.caseSensitive">{{personaGenerada[col.columna2] | caseTransformer: tipoLetra }}</span>
                  <span *ngIf="!col.caseSensitive">{{personaGenerada[col.columna2]}}</span>
                </button>
              </div>
              <!--subobjeto: la propiedad directo hijo de es un subobjeto, se muestra la propiedad del subobjeto indicado
                Lo utilizamos para la propiedad "direccion"
              -->
              <div *ngSwitchCase="'subobjeto'">
                <button mat-flat-button [ngClass]="col.clase"  type="button" (click)="onSelectDato(transformaTexto(personaGenerada[col.columna]?.[col.subpropiedad], col.caseSensitive))"
                  matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
                  <span *ngIf="col.caseSensitive">{{personaGenerada[col.columna]?.[col.subpropiedad] | caseTransformer: tipoLetra}}</span>
                  <span *ngIf="!col.caseSensitive">{{personaGenerada[col.columna]?.[col.subpropiedad]}}</span>
                </button>
                <button *ngIf="personaGenerada[col.columna2]"
                  mat-flat-button [ngClass]="col.clase"  type="button" (click)="onSelectDato(transformaTexto(personaGenerada[col.columna2]?.[col.subpropiedad2], col.caseSensitive))"
                  matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
                  <span *ngIf="col.caseSensitive">{{personaGenerada[col.columna2]?.[col.subpropiedad2] | caseTransformer: tipoLetra}}</span>
                  <span *ngIf="!col.caseSensitive">{{personaGenerada[col.columna2]?.[col.subpropiedad2]}}</span>
                </button>
              </div>
              <span *ngSwitchDefault>
                {{ personaGenerada[col.columna] }}
              </span>
            </div>
          </td>
        </ng-container>

        <!-- **DEPRECATED: opcion de rellenar por cada columna
        <ng-container matColumnDef="nif">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>NIF</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.nif)"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="nif">{{personaGenerada.nif}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="nie">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>NIE</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.nie)"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="nie">{{personaGenerada.nie}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="nss">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>NSS</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.nss)"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="nss">{{personaGenerada.nss}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="pasaporte">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Pasaporte</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.pasaporte)"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="pasaporte">{{personaGenerada.pasaporte}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="sexo">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Sexo</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.genero))"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="genero">{{ personaGenerada.genero | caseTransformer: tipoLetra }}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="fechanacimiento">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Fecha nacimiento (edad)</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <div>
              <button mat-flat-button class="botonFlatReducido"  type="button" (click)="onSelectDato(personaGenerada.fechaNacimiento)"
              matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
                <span class="fecha">{{personaGenerada.fechaNacimiento}}</span>
              </button>
              <button mat-flat-button class="botonFlatReducido"  type="button" (click)="onSelectDato(personaGenerada.edad)"
              matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
                <span class="edad">{{personaGenerada.edad}}</span>
              </button>
            </div>
          </td>
        </ng-container>

        <ng-container matColumnDef="nombre">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Nombre</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.nombre))"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="nombre">{{personaGenerada.nombre | caseTransformer: tipoLetra}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="apellido1">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>1º Apellido</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.apellido1))"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="nombre">{{personaGenerada.apellido1 | caseTransformer: tipoLetra}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="apellido2">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>2º Apellido</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.apellido2))"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="nombre">{{personaGenerada.apellido2 | caseTransformer: tipoLetra}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="nombrecompleto">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Nombre completo</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button type="button" (click)="onSelectDato(transformaTexto(personaGenerada.nombreCompleto))" class="botonFlatGrande"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="nombre">{{personaGenerada.nombreCompleto | caseTransformer: tipoLetra}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="tlfmovil">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Teléfono movil</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.telefonoMovil)"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="telefono">{{personaGenerada.telefonoMovil}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="tlffijo">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Teléfono fijo</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.telefonoFijo)"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="telefono">{{personaGenerada.telefonoFijo}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="login">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Login</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.login)"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="login">{{personaGenerada.login}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="email">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.email)"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="email">{{personaGenerada.email}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="password">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Password</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.password)"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="password">{{personaGenerada.password}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="ccaa">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>CCAA</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <div>
              <button mat-flat-button class="botonFlatReducido"  type="button" (click)="onSelectDato(personaGenerada.direccion.ineCcaa)"
              matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
                <span class="ccaaIne">{{personaGenerada.direccion.ineCcaa}}</span>
              </button>
              <button mat-flat-button class="botonFlatReducido"  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.direccion.ccaa))"
              matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
                <span class="ccaa">{{personaGenerada.direccion.ccaa | caseTransformer: tipoLetra}}</span>
              </button>
            </div>
          </td>
        </ng-container>

        <ng-container matColumnDef="provincia">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Provincia</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <div>
              <button mat-flat-button class="botonFlatReducido"  type="button" (click)="onSelectDato(personaGenerada.direccion.ineProvincia)"
              matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
                <span class="provinciaIne">{{personaGenerada.direccion.ineProvincia}}</span>
              </button>
              <button mat-flat-button class="botonFlatReducido"  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.direccion.provincia))"
              matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
                <span class="provincia">{{personaGenerada.direccion.provincia | caseTransformer: tipoLetra}}</span>
              </button>
            </div>
          </td>
        </ng-container>

        <ng-container matColumnDef="municipio">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Municipio</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <div>
              <button mat-flat-button class="botonFlatReducido"  type="button" (click)="onSelectDato(personaGenerada.direccion.ineMunicipio)"
              matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
                <span class="municipioIne">{{personaGenerada.direccion.ineMunicipio}}</span>
              </button>
              <button mat-flat-button class="botonFlatReducido"  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.direccion.municipio))"
              matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
                <span class="municipio">{{personaGenerada.direccion.municipio | caseTransformer: tipoLetra}}</span>
              </button>
            </div>
          </td>
        </ng-container>

        <ng-container matColumnDef="codpostal">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Cod. Postal</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.direccion.codPostal)"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="codigoPostal">{{personaGenerada.direccion.codPostal}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="direccion">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Dirección</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.direccion.direccionAMedio))" class="botonFlatGrande"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="direccion">{{personaGenerada.direccion.direccionAMedio | caseTransformer: tipoLetra}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="direccioncompleta">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Dirección completa</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.direccion.direccionCompleta))" class="botonFlatGrande"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="direccion">{{personaGenerada.direccion.direccionCompleta | caseTransformer: tipoLetra}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="referenciaCatastral">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Ref. catastral</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.direccion.referenciaCatastral))"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="direccion">{{personaGenerada.direccion.referenciaCatastral | caseTransformer: tipoLetra}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="iban">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>IBAN</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.iban)"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="iban">{{personaGenerada.iban}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="bic">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>BIC (SWIFT)</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.bic)"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="bic">{{personaGenerada.bic}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="tarjeta">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Num tarjeta</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.tarjetaCredito)"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="tarjetaCredito">{{personaGenerada.tarjetaCredito}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="tipotarjeta">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Tipo tar</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(transformaTexto(personaGenerada.tipoTarjeta))"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="tipoTarjeta">{{personaGenerada.tipoTarjeta | caseTransformer: tipoLetra}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="expiracion">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Expiración</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.expiracionCredito)"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="expiracionCredito">{{personaGenerada.expiracionCredito}}</span>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="cvc">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>CVC</th>
          <td mat-cell *matCellDef="let personaGenerada">
            <button mat-flat-button  type="button" (click)="onSelectDato(personaGenerada.cvc)"
            matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
              <span class="cvc">{{personaGenerada.cvc}}</span>
            </button>
          </td>
        </ng-container>
        -->

        <tr mat-header-row *matHeaderRowDef="displayedColumnsPersonas"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumnsPersonas;"></tr>
      </table>

    </div>

    <!-- Acciones, y paginador, fuera del div anterior que es el que crea el scrool horizontal responsive -->
    <div style="float: left;margin-top:5px;">
      <button type="button" mat-fab class="botonRotatorio" style="margin-left: 5px;"
        attr.aria-label="{{ 'generadores.jpromocion.generarcomunes.boton.limpiar.label' | translate }}"
        (click)="onClickLimpiarPersonas()"
        matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.limpiar.tooltip' | translate }}" matTooltipPosition="below">
        <mat-icon>delete</mat-icon>
      </button>
      <button type="button" mat-fab class="botonRotatorio" style="margin-left: 5px;"
        (click)="onClickLimpiarFiltrosPersonas()"
        attr.aria-label="{{ 'generadores.jpromocion.generarcomunes.boton.limpiarfiltros.label' | translate }}"
        matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.limpiarfiltros.tooltip' | translate }}" matTooltipPosition="below">
        <mat-icon>cleaning_services</mat-icon>
      </button>
      <button type="button" style="margin-left: 5px;" mat-fab class="botonRotatorio"
        attr.aria-label="{{ 'generadores.jpromocion.generarcomunes.boton.exportarexcel.label' | translate }}"
        (click)="exportJsonPersonas()"
        matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.exportarexcel.tooltip' | translate }}" matTooltipPosition="below">
        <mat-icon>description</mat-icon>
      </button>
      <mat-form-field style="margin-left: 5px; width: 350px !important;">
        <mat-label>{{ 'generadores.jpromocion.generarcomunes.entrada.columnasvisibles.label' | translate }}</mat-label>
        <mat-select multiple [(ngModel)]="selectColumnasPersonas">
          @for (columna of listaColumnasPersonas; track columna) {
            <mat-option #matOptionColumPersonas [value]="columna"
              (click)="togglePerOneColumnasPersonas(matOptionColumPersonas.selected, matOptionColumPersonas.value)">
              {{columna | translate}}
            </mat-option>
          }
        </mat-select>
      </mat-form-field>
    </div>

    <div style="float: right;margin-top:5px;">
      <!-- Porque daba undefine el paginador... al estar dentro del div con el ngIf para no mostrar hasta tener datos... la primera
        vez llegaba undefined
        -> https://stackoverflow.com/questions/48785965/angular-matpaginator-doesnt-get-initialized
        -> https://stackoverflow.com/questions/56028775/mat-paginator-breaks-when-mat-table-is-inside-of-ngif
        Susdituimos el ngIf del div por un hidden justo con la condicion opuesta
      -->
      <mat-paginator #paginatorPersonas="matPaginator"
        [pageSize]="5" [pageSizeOptions]="[5, 10, 20]"
        showFirstLastButtons
        attr.aria-label="{{ 'generadores.jpromocion.generarcomunes.paginador.label' | translate }}">
      </mat-paginator>
    </div>


  </div>



   <!-- Empresas cuando estamos generando una lista -->
   <div [@entradaLateralAnimation] *ngIf="listaEmpresasGeneradasOriginal.length && listaEmpresasGeneradasOriginal.length > 0" >
    <div style="margin-top: 10px;">
      <div class="divBox">
        <div [matBadge]="badgetEmpresasGeneradas" matBadgeOverlap="false"><h3>{{ 'generadores.jpromocion.perfil.frame.empresasgeneradas' | translate }}</h3></div>
      </div>
    </div>

    <div class="table-responsive">
      <table mat-table #sortEmpresas="matSort" [dataSource]="listaEmpresasGeneradas"
        matSort  (matSortChange)="sortDataEmpresas($event)"
        cdkDropList cdkDropListOrientation="horizontal" (cdkDropListDropped)="dropColumnsEmpresas($event)">

        <!-- Opcion de parametrizar columna y mostrar por tipo en vez de hacerlo por cada columna
          https://muhimasri.com/blogs/create-an-editable-dynamic-table-using-angular-material/
         -->
        <ng-container [matColumnDef]="col.key" *ngFor="let col of columnsSchemaEmpresas">
          <th mat-header-cell *matHeaderCellDef mat-sort-header cdkDrag>
            {{ col.label | translate }}
            <button mat-icon-button (click)="$event.stopPropagation(); openFilterEmpresas(col.key); ">
              <mat-icon>search</mat-icon>
            </button>
            <input class="filtroCabeceraTabla" #inputSearchEmpresas type="text" hidden id="{{col.key}}-filterEmpresas"
              (click)="$event.stopPropagation()"
              (blur)="filterDataEmpresas(col.key, inputSearchEmpresas.value); closeFilterEmpresas(col.key)" />
          </th>
          <td mat-cell *matCellDef="let empresaGenerada">
            <!-- Seleccionamos por el type como mostrarlo-->
            <div [ngSwitch]="col.type" >
              <!--button: boton normal para mostrar un dato (viene parametrizado por propiedades: si aplica una clase de formato distinta,
                si aplica cambio mayus/minus e incluso si no lleva solo un valor a mostrar sino dos valores)
              -->
              <div *ngSwitchCase="'button'">
                <button mat-flat-button [ngClass]="col.clase" type="button" (click)="onSelectDato(transformaTexto(empresaGenerada[col.columna], col.caseSensitive))"
                matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
                  <span *ngIf="col.caseSensitive">{{empresaGenerada[col.columna] | caseTransformer: tipoLetra }}</span>
                  <span *ngIf="!col.caseSensitive">{{empresaGenerada[col.columna]}}</span>
                </button>
                <button *ngIf="empresaGenerada[col.columna2] && empresaGenerada[col.columna2] != ''"
                  mat-flat-button [ngClass]="col.clase" type="button" (click)="onSelectDato(transformaTexto(empresaGenerada[col.columna2], col.caseSensitive))"
                  matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
                  <span *ngIf="col.caseSensitive">{{empresaGenerada[col.columna2] | caseTransformer: tipoLetra }}</span>
                  <span *ngIf="!col.caseSensitive">{{empresaGenerada[col.columna2]}}</span>
                </button>
              </div>
              <!--subobjeto: la propiedad directo hijo de es un subobjeto, se muestra la propiedad del subobjeto indicado
                Lo utilizamos para la propiedad "direccion"
              -->
              <div *ngSwitchCase="'subobjeto'">
                <button mat-flat-button [ngClass]="col.clase"  type="button" (click)="onSelectDato(transformaTexto(empresaGenerada[col.columna]?.[col.subpropiedad], col.caseSensitive))"
                matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
                  <span *ngIf="col.caseSensitive">{{empresaGenerada[col.columna]?.[col.subpropiedad] | caseTransformer: tipoLetra}}</span>
                  <span *ngIf="!col.caseSensitive">{{empresaGenerada[col.columna]?.[col.subpropiedad]}}</span>
                </button>
                <button *ngIf="empresaGenerada[col.columna2]"
                  mat-flat-button [ngClass]="col.clase"  type="button" (click)="onSelectDato(transformaTexto(empresaGenerada[col.columna2]?.[col.subpropiedad2], col.caseSensitive))"
                  matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.copiar.tooltip' | translate }}" matTooltipPosition="below">
                  <span *ngIf="col.caseSensitive">{{empresaGenerada[col.columna2]?.[col.subpropiedad2] | caseTransformer: tipoLetra}}</span>
                  <span *ngIf="!col.caseSensitive">{{empresaGenerada[col.columna2]?.[col.subpropiedad2]}}</span>
                </button>
              </div>
              <span *ngSwitchDefault>
                {{ empresaGenerada[col.columna] }}
              </span>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumnsEmpresas"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumnsEmpresas;"></tr>
      </table>
    </div>

    <!-- Acciones, y paginador, fuera del div anterior que es el que crea el scrool horizontal responsive -->
    <div style="float: left;margin-top:5px;">
      <button type="button" mat-fab class="botonRotatorio" style="margin-left: 5px;"
        attr.aria-label="{{ 'generadores.jpromocion.generarcomunes.boton.limpiar.label' | translate }}"
        (click)="onClickLimpiarEmpresas()"
        matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.limpiar.tooltip' | translate }}" matTooltipPosition="below">
        <mat-icon>delete</mat-icon>
      </button>
      <button type="button" mat-fab class="botonRotatorio" style="margin-left: 5px;"
        attr.aria-label="{{ 'generadores.jpromocion.generarcomunes.boton.limpiarfiltros.label' | translate }}"
        (click)="onClickLimpiarFiltrosEmpresas()"
        matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.limpiarfiltros.tooltip' | translate }}" matTooltipPosition="below">
        <mat-icon>cleaning_services</mat-icon>
      </button>
      <button type="button" style="margin-left: 5px;" mat-fab class="botonRotatorio"
        attr.aria-label="{{ 'generadores.jpromocion.generarcomunes.boton.exportarexcel.label' | translate }}"
        (click)="exportJsonEmpresas()"
        matTooltip="{{ 'generadores.jpromocion.generarcomunes.boton.exportarexcel.tooltip' | translate }}" matTooltipPosition="below">
        <mat-icon>description</mat-icon>
      </button>
      <mat-form-field style="margin-left: 5px; width: 350px !important;">
        <mat-label>{{ 'generadores.jpromocion.generarcomunes.entrada.columnasvisibles.label' | translate }}</mat-label>
        <mat-select multiple [(ngModel)]="selectColumnasEmpresas">
          @for (columna of listaColumnasEmpresas; track columna) {
            <mat-option #matOptionColumEmpresas [value]="columna"
              (click)="togglePerOneColumnasEmpresas(matOptionColumEmpresas.selected, matOptionColumEmpresas.value)">
              {{columna | translate}}
            </mat-option>
          }
        </mat-select>
      </mat-form-field>
    </div>

    <div style="float: right;margin-top:5px;">
      <mat-paginator #paginatorEmpresas="matPaginator"
        [pageSize]="5" [pageSizeOptions]="[5, 10, 20]"
        showFirstLastButtons
        attr.aria-label="{{ 'generadores.jpromocion.generarcomunes.paginador.label' | translate }}">
      </mat-paginator>
    </div>


  </div>






</div>




